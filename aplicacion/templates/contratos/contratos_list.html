{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Lista de Contratos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'aplicacion/css/style.css' %}?v=1.3">
    <style>
        .btn-home {
            float: right;
            margin-bottom: 15px;
        }
        .table thead th {
            background-color: #28a745;
            color: white;
        }
        .table tbody tr:hover {
            background-color: #f0f8ff;
        }
        .card form .form-control {
            border-radius: 0.3rem;
        }
        .card form button {
            background-color: #28a745;
            border-color: #28a745;
        }
    </style>
</head>
<body>
<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Gesti√≥n de Contratos</h2>
        <a href="{% url 'index' %}" class="btn btn-success btn-home">üè† Inicio</a>
    </div>

    <!-- Formulario de creaci√≥n/edici√≥n -->
    <div class="card mb-4 p-3 shadow-sm">
        <form method="POST">
            {% csrf_token %}
            <div class="row g-3">
                <div class="col-md-4">
                    {{ form.nombre_transporte.label_tag }} {{ form.nombre_transporte }}
                </div>
                <div class="col-md-3">
                    {{ form.fecha_inicio.label_tag }} {{ form.fecha_inicio }}
                </div>
                <div class="col-md-3">
                    {{ form.fecha_termino.label_tag }} {{ form.fecha_termino }}
                </div>
            </div>
        </form>
    </div>

    <!-- Tabla de contratos -->
    <table class="table table-striped table-hover shadow-sm">
        <thead>
            <tr>
                <th>ID</th>
                <th>Transporte</th>
                <th>Fecha Inicio</th>
                <th>Fecha T√©rmino</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for contrato in contratos %}
            <tr>
                <td>{{ contrato.id }}</td>
                <td>{{ contrato.nombre_transporte }}</td>
                <td>{{ contrato.fecha_inicio|date:"d/m/Y" }}</td>
                <td>{{ contrato.fecha_termino|date:"d/m/Y" }}</td>
                <td>
                    <a href="{% url 'contrato_editar' contrato.id %}" class="btn btn-sm btn-primary">Editar</a>
                    <a href="{% url 'contrato_eliminar' contrato.id %}" class="btn btn-sm btn-danger">Eliminar</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" class="text-center">No hay contratos registrados.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>    